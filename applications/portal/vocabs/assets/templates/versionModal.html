<div style="modal-center">
	<div class="modal-header">
		<button type="button" class="close" ng-click="dismiss()"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
		<h4 class="modal-title"><span ng-if="version.title">Edit</span> <span ng-if="!version.title">Add a new</span> version</h4>
	</div>
	<div class="modal-body swatch-white" ng-cloak>
		<form action="" class="form">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-12">
						<div class="form-group">
							<label for="">Status: </label>
							<select name="" id="" class="form-control" ng-options="status for status in versionStatuses" ng-model="version.status"></select>
						</div>
						<div class="form-group">
							<label for="">Title</label>
							<input type="text" class="form-control" placeholder="Title" ng-model="version.title">	
						</div>
					</div>
				</div>
			
				<div class="row">
					<div class="col-md-12">
						<div class="form-group">
							<label for="">Release Date</label>
							<p class="input-group">
								<input type="text" class="form-control" ng-model="version.release_date" placeholder="Release Date" datepicker-popup="dd-MM-yyyy" is-open="opened" >
								<span class="input-group-btn">
									<button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
								</span>
							</p>
						</div>
						<div class="form-group">
							<label for="">Notes</label>
							<textarea ng-model="version.note" class="form-control"></textarea>
						</div>
					</div>
				</div>

				<a href="" class="btn btn-primary btn-block" ng-click="importPP()" ng-if="version.provider_type!='poolparty'">Import Version from PoolParty</a>
				<a href="" class="btn btn-default btn-block" ng-click="version.provider_type='manual'" ng-show="version.provider_type!='manual'">Input Access Points Manually</a>
				
				<hr>

				<div class="row">
					<div class="col-md-12">
						<table class="table" ng-if="version.access_points">
							<thead>
								<th>Access Point</th> <th>Type</th> <th>URI</th> <th></th>
							</thead>
							<tbody>
								<tr ng-repeat="ap in version.access_points track by $index">
									<td>[[ ap.format ]]</td>
									<td>[[ ap.type ]]</td>
									<td>[[ ap.uri ]]</td>
									<td><a href="" ng-click="list_remove('access_points', $index)"><i class="fa fa-remove"></i></a></td>
								</tr>
							</tbody>
						</table>
						<div ng-if="version.provider_type=='manual'">
							<form action="">
								<div class="form-group">
									<label for="">Access Point</label>
                                    <input type="text" class="form-control" placeholder="Format" ng-model="newap.format" typeahead="format as format for format in formats |  limitTo:8" typeahead-min-length="0">
								</div>
								<div class="form-group">
									<label for="">Access Point Type</label>
                                    <select class="form-control" ng-options="type.value as type.text for type in types" ng-model="newap.type"></select>
								</div>
								<div class="form-group">
									<label for="">Access Point URI</label>
									<p class="input-group">
										<input type="text" class="form-control" placeholder="URI" ng-model="newap.uri">
										<span class="input-group-btn">
											<button type="button" class="btn btn-default" ng-file-select ng-file-change="upload($files, newap)"><i class="fa fa-upload"></i> Upload File</button>
										</span>
										<div class="alert alert-important" ng-if="error_upload_msg">[[ error_upload_msg ]]</div>
									</p>
								</div>
								<button type="button" class="btn btn-primary" ng-click="addformat(newap)"><i class="fa fa-plus"></i> Add Access Point</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
	<div class="modal-footer swatch-white">
		<button class="btn btn-link" type="button" ng-click="dismiss()">Cancel</button>
		<button class="btn btn-primary" type="button" ng-if="action=='add'" ng-click="save()">Add this Version</button>
		<button class="btn btn-primary" type="button" ng-if="action=='save'" ng-click="save()">Save</button>
	</div>
</div>